{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///D:/Smart%20Task%20Management%20System/my-next-app/src/app/lib/mongodb.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nlet isConnected=false;\r\nexport async function connectDB() {\r\n    if(isConnected) return;\r\n    try{\r\n        await mongoose.connect(process.env.MONGO_URI , {\r\n            dbName: \"mynextapp\",\r\n        \r\n    });\r\n    isConnected=true;\r\n    console.log(\"MongoDB connected\");\r\n}catch(error){\r\n    console.error(\"MongoDB CONNECTION error\",error);\r\n\r\n}\r\n\r\n}"],"names":[],"mappings":";;;;AAAA;;AAEA,IAAI,cAAY;AACT,eAAe;IAClB,IAAG,aAAa;IAChB,IAAG;QACC,MAAM,oHAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,SAAS,EAAG;YAC3C,QAAQ;QAEhB;QACA,cAAY;QACZ,QAAQ,GAAG,CAAC;IAChB,EAAC,OAAM,OAAM;QACT,QAAQ,KAAK,CAAC,4BAA2B;IAE7C;AAEA","debugId":null}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///D:/Smart%20Task%20Management%20System/my-next-app/src/models/Task.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst TaskSchema = new mongoose.Schema(\r\n  {\r\n    title: { type: String, required: true },\r\n    description: { type: String },\r\n    status: {\r\n      type: String,\r\n      enum: [\"Pending\", \"In Progress\", \"Completed\"],\r\n      default: \"Pending\",\r\n    },\r\n    priority: {\r\n      type: String,\r\n      enum: [\"High\", \"Medium\", \"Low\"],\r\n      default: \"Medium\",\r\n    },\r\n    dueDate: { type: Date },\r\n    userId: { type: String, required: true },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nexport default mongoose.models.Task || mongoose.model(\"Task\", TaskSchema);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,aAAa,IAAI,oHAAQ,CAAC,MAAM,CACpC;IACE,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,aAAa;QAAE,MAAM;IAAO;IAC5B,QAAQ;QACN,MAAM;QACN,MAAM;YAAC;YAAW;YAAe;SAAY;QAC7C,SAAS;IACX;IACA,UAAU;QACR,MAAM;QACN,MAAM;YAAC;YAAQ;YAAU;SAAM;QAC/B,SAAS;IACX;IACA,SAAS;QAAE,MAAM;IAAK;IACtB,QAAQ;QAAE,MAAM;QAAQ,UAAU;IAAK;AACzC,GACA;IAAE,YAAY;AAAK;uCAGN,oHAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,oHAAQ,CAAC,KAAK,CAAC,QAAQ","debugId":null}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///D:/Smart%20Task%20Management%20System/my-next-app/src/app/api/tasks/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { connectDB } from \"@/app/lib/mongodb\";\r\nimport Task from \"@/models/Task\";\r\n\r\n\r\nexport async function POST(req) {\r\n  try {\r\n    await connectDB();\r\n    const body = await req.json();\r\n\r\n    console.log(\"Incoming Task Data:\", body);\r\n\r\n    if (!body.title || !body.userId) {\r\n      return NextResponse.json(\r\n        { error: \"Title and userId are required\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n    const dueDateValue =\r\n      body.dueDate && body.dueDate !== \"\" ? new Date(body.dueDate) : null;\r\n\r\n    const newTaskData = { ...body, dueDate: dueDateValue };\r\n    delete newTaskData._id;\r\n\r\n    const task = await Task.create(newTaskData);\r\n    console.log(\" Task Created:\", task);\r\n\r\n   \r\n    return NextResponse.json(task, { status: 201 });\r\n  } catch (error) {\r\n    console.error(\" POST /api/tasks error:\", error);\r\n    return NextResponse.json(\r\n      { error: error.message || \"Failed to create task\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport async function GET(req) {\r\n  try {\r\n    await connectDB();\r\n\r\n    const { searchParams } = new URL(req.url);\r\n\r\n    const status = searchParams.get(\"status\");\r\n    const priority = searchParams.get(\"priority\");\r\n    const search = searchParams.get(\"search\");\r\n    const sortBy = searchParams.get(\"sortBy\");\r\n    const userId = searchParams.get(\"userId\");\r\n\r\n    if (!userId) {\r\n      return NextResponse.json(\r\n        { error: \"Missing userId\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    let query = { userId };\r\n\r\n    if (status) query.status = status;\r\n    if (priority) query.priority = priority;\r\n\r\n    if (search) {\r\n      query.$or = [\r\n        { title: { $regex: search, $options: \"i\" } },\r\n        { description: { $regex: search, $options: \"i\" } },\r\n      ];\r\n    }\r\n\r\n    let taskQuery = Task.find(query);\r\n\r\n    if (sortBy === \"dueDate\") {\r\n      taskQuery = taskQuery.sort({ dueDate: 1 });\r\n    } else if (sortBy === \"priority\") {\r\n      taskQuery = taskQuery.sort({ priority: 1 });\r\n    }\r\n\r\n    const tasks = await taskQuery;\r\n    console.log(`${tasks.length} tasks fetched for user: ${userId}`);\r\n\r\n    return NextResponse.json(tasks, { status: 200 });\r\n  } catch (error) {\r\n    console.error(\"GET /api/tasks error:\", error);\r\n    return NextResponse.json(\r\n      { error: error.message || \"Failed to fetch tasks\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAGO,eAAe,KAAK,GAAG;IAC5B,IAAI;QACF,MAAM,IAAA,2IAAS;QACf,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,QAAQ,GAAG,CAAC,uBAAuB;QAEnC,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,MAAM,EAAE;YAC/B,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAgC,GACzC;gBAAE,QAAQ;YAAI;QAElB;QACA,MAAM,eACJ,KAAK,OAAO,IAAI,KAAK,OAAO,KAAK,KAAK,IAAI,KAAK,KAAK,OAAO,IAAI;QAEjE,MAAM,cAAc;YAAE,GAAG,IAAI;YAAE,SAAS;QAAa;QACrD,OAAO,YAAY,GAAG;QAEtB,MAAM,OAAO,MAAM,kIAAI,CAAC,MAAM,CAAC;QAC/B,QAAQ,GAAG,CAAC,kBAAkB;QAG9B,OAAO,gJAAY,CAAC,IAAI,CAAC,MAAM;YAAE,QAAQ;QAAI;IAC/C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,MAAM,OAAO,IAAI;QAAwB,GAClD;YAAE,QAAQ;QAAI;IAElB;AACF;AAGO,eAAe,IAAI,GAAG;IAC3B,IAAI;QACF,MAAM,IAAA,2IAAS;QAEf,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;QAExC,MAAM,SAAS,aAAa,GAAG,CAAC;QAChC,MAAM,WAAW,aAAa,GAAG,CAAC;QAClC,MAAM,SAAS,aAAa,GAAG,CAAC;QAChC,MAAM,SAAS,aAAa,GAAG,CAAC;QAChC,MAAM,SAAS,aAAa,GAAG,CAAC;QAEhC,IAAI,CAAC,QAAQ;YACX,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAiB,GAC1B;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,QAAQ;YAAE;QAAO;QAErB,IAAI,QAAQ,MAAM,MAAM,GAAG;QAC3B,IAAI,UAAU,MAAM,QAAQ,GAAG;QAE/B,IAAI,QAAQ;YACV,MAAM,GAAG,GAAG;gBACV;oBAAE,OAAO;wBAAE,QAAQ;wBAAQ,UAAU;oBAAI;gBAAE;gBAC3C;oBAAE,aAAa;wBAAE,QAAQ;wBAAQ,UAAU;oBAAI;gBAAE;aAClD;QACH;QAEA,IAAI,YAAY,kIAAI,CAAC,IAAI,CAAC;QAE1B,IAAI,WAAW,WAAW;YACxB,YAAY,UAAU,IAAI,CAAC;gBAAE,SAAS;YAAE;QAC1C,OAAO,IAAI,WAAW,YAAY;YAChC,YAAY,UAAU,IAAI,CAAC;gBAAE,UAAU;YAAE;QAC3C;QAEA,MAAM,QAAQ,MAAM;QACpB,QAAQ,GAAG,CAAC,GAAG,MAAM,MAAM,CAAC,yBAAyB,EAAE,QAAQ;QAE/D,OAAO,gJAAY,CAAC,IAAI,CAAC,OAAO;YAAE,QAAQ;QAAI;IAChD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,MAAM,OAAO,IAAI;QAAwB,GAClD;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}